<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>CGI - Outil de chiffrage</title>

    <div th:replace="fragments/header :: header-css"></div>

</head>
<body>

	<div th:replace="fragments/header :: header" ></div>
	<nav th:replace="fragments/navigation :: navigation" ></nav>
	<div th:replace="admin/fragments/adminNav.html :: adminNav" ></div>
	
	<div id="userDiv" class="container">

           	<div class="row">
				<form method="POST" action th:action="@{/administration/users/save/}" th:object="${user}">
					<div class="col-lg-12">
	               		<div class="card">
						 	<div class="card-header" th:text="${create}?'Création d\'un nouvel utilisateur':'Modification d\'un utilisateur'"></div>
							<div class="card-body">
								<div class="table-responsive">
									<table class="table table-striped table-sm">
										<thead>
											<tr>
												<th scope="col">Utilisateur</th>
												<th scope="col">Nom</th>
												<th scope="col">Prénom</th>
												<th scope="col">Matricule</th>
												<th scope="col">Mot de passe</th>
												
											</tr>
										</thead> 
										<tbody id="userData" >
											<tr>
												<td class="d-none"><input id="idValue" th:field="${user.id}" /></td>
											 	<td><input id="usernameValue" class="form-control" th:field="${user.username}" required /><div id="usenameFeedBack"  class="invalid-feedback"></div></td>
											 	
												<td><input class="form-control" th:field="${user.firstname}" required /></td>
												<td><input class="form-control" th:field="${user.lastname}" required /></td>
												<td><input class="form-control" th:field="${user.staffNumber}" /></td>
												<td id="pwdTd"><button th:if="!${create}" id="initPwdBtn" type="button">Réinitialiser le mot de passe</button><p th:attr="class=${create? '' : 'd-none'}"  id="genericPwdTd" th:text="${genericPassword}"></p></td>
												
											</tr>
										</tbody>
									</table>
								</div>
							</div>
						</div>
						
						<select th:field="${user.role}" th:disabled="${user.id == applicationUserId}">
							<option th:each="role : ${roles}" th:text="${role.label}" th:value="${role.id}">12</option> 
						</select>
						<button id="submitBtn" type="submit">Valider</button>
					</div>
				</form>
				
			</div>
			<a  id="" th:href="@{/administration/users}" aria-disabled="true" role="button" class="float-right btn btn-outline-success"><i class="fas fa-undo fa2x"></i></i><span>Retour</span></a>
		</div>
	
	<div th:replace="fragments/footer :: footer"></div>
	<script type="text/javascript" th:src="@{/js/userAdmin.js}"></script>

</body>
</html>